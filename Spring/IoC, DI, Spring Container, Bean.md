# [Spring] IoC, DI, Spring Container, Bean에 대해서 알아보자
## 개요
스프링 프레임워크를 사용하는 개발자라면 IoC, DI, Spring Container, Bean 에 대한 개념을 알아야한다고 생각했고, 정리하고자 한다.

## IoC(Inversion of Control)
IoC란 Inversion of Control의 약자로 해석하면 **제어의 역전**이다.

## 제어의 역전?
메소드나 객체의 호출작업을 개발자가 결정하는 것이 아니라 외부에서 결정(스프링 프레임워크)되는 것을 말한다.

일반적으로 의존성은 개발자가 직접 의존성을 만들게 된다.
여기서 의존성이란 기능 구현을 위해 다른 구성 요소를 사용하는 것이다. 더 쉽게 표현하자면 B라는 기능을 사용하기 위해선 A라는 기능이 필요하다는 의미이다.

기능 구현에 필요한 객체들을 구현한 후, 각 객체에서 필요한 의존성들은 이제 외부(스프링 프레임워크)에 맡기게 되면 최종적으로 프레임워크 내부에서 결정된 대로 이뤄지게 된다. 이러한 형태를 제어의 역전이라고 표현한다.

## Inversion of Control의 종류
IoC의 종류로는 꼭 DI만 존재하는 것은 아니다.
Service Locator, Factory, Templete Method, Strategy, Abstract Factory 라는 것들도 있다. 

사실 전부다 알고있는 상태는 아니고, 이런 종류들도 있구나 라는 형태로 넘어간다.

## 그렇다면 스프링은 왜 제어의 역전을 채택했을까?
가장 큰 이유는 객체간의 결합도를 낮추기 위해 채택했다고 생각한다. 결합도가 높으면 높을수록 변경이나 확장하는 비용이 점점 증가하게 된다. 반면 결합도가 낮은 경우 변경이나 확장하는 비용을 낮춰준다.

이는 객체 지향의 주요 개념 중 추상화와도 밀접한 관계를 가지고 있다고 생각한다.
추상화를 잘할수록 OCP 원칙을 잘 지키는 구조가 나오기 때문이다.


## DI(Dependency Injection)
DI란 Dependency Injection의 약자로 번역하면 **의존성 주입**이라는 뜻이다.

말 그대로 객체를 직접 생성하는 것이 아니라 외부에서 생성한 후 주입시키는 방식이다. (마치 우리가 몸이 안좋을 때 링거로 수액을 맞는것처럼)

### 제어의 역전과 무슨 관계가 있을까?
위에서 IoC를 살펴볼 때, 메소드나 객체의 호출작업을 개발자가 결정하는 것이 아니라 외부에서 결정된다고 이야기했다. 

여기서 만약 개발자가 직접 의존성을 만든다면 어떻게 만들까? 높은 확률로 new 연산자를 통해 객체를 직접 생성할 것이다. 하지만 이런 방법은 소프트웨어의 결합도를 증가시키는 원인 중 하나이다.

그래서 스프링은 의존 대상 객체를 직접 생성하지 않은 방법 중 생성자나 메소드를 이용해서 주입하는 방식인 Dependency Injection 방법을 선택한 것이다.

### 그렇다면 누가 의존성을 주입해줄것인가?
스프링 프레임워크가 객체 생성, 의존 주입을 처리하게 된다.

### DI 장점
- 의존 대상이 바뀌게 되면 스프링 프레임워크의 설정만 변경해주면 된다.
- 의존하는 객체 없이 대역 객체를 사용해서 테스트를 진행할 수 있다.

## Spring Container
스프링은 스프링 컨테이너를 통해 객체를 관리하는데, 이때 스프링 컨테이너에서 관리되는 객체를 빈(Bean)이라고 한다.

### Spring Container가 하는 역할은?
객체를 생성하고, 객체 사이의 런타임 의존관계를 맺어주는 역할을 한다. 여기서 IoC 와 DI가 일어난다.

### Spring Container의 종류
- BeanFactory
    - 스프링 컨테이너의 최상위 인터페이스
- ApplicationContext
    - BeanFactory를 포함한 여러 인터페이스를 상속받은 인터페이스로, 흔히 말하는 Spring Container가 ApplicationContext를 의미한다.

## Bean
Spring Container가 관리하는 자바 객체를 Bean 이라고 부른다.
스프링에서 Bean을 등록하는 방법은 두가지가 존재한다.

1. 자바 Annotation을 이용한 Bean 등록
    - `@Component` 애노테이션이 있다면, Spring이 해당 애노테이션을 확인하고 Bean으로 등록한다.
2. Bean Configuration File에 직접 등록
    - `@Configuration`과 `@Bean` 애노테이션을 이용하여 Bean을 등록할 수 있다.
3. XML 기반으로 만드는 방법(현재 이 방법은 많이 쓰지 않는다고 함)